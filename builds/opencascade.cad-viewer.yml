mainBuild:
  name: opencascade.cad-viewer.js
  emccFlags:
    - -DHAVE_RAPIDJSON=1
    - -DOCCT_NO_PLUGINS
    - -O3
    - -flto
    - -sEXPORT_ES6=1
    - -sUSE_ES6_IMPORT_META=1
    - -sEXPORTED_RUNTIME_METHODS=["FS"]
    - -sINITIAL_MEMORY=128mb
    - -fwasm-exceptions
    - -sMAXIMUM_MEMORY=4GB
    - -sERROR_ON_UNDEFINED_SYMBOLS=0
    - -sMEMORY_GROWTH_GEOMETRIC_STEP=1
    - -sMEMORY_GROWTH_GEOMETRIC_CAP=2GB
    - -sALLOW_MEMORY_GROWTH=1
    - -pthread
    - -sPTHREAD_POOL_SIZE='navigator.hardwareConcurrency'
    - -sUSE_FREETYPE=1
    - --no-entry
    - -sENVIRONMENT='web,worker'
